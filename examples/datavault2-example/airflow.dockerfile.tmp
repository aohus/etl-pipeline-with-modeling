ADD file:1dd78a123212328bdc72ef7888024ea27fe141a72e24e0ea7c3c92b63b73d8d1 in / 
CMD ["bash"]
ENV DEBIAN_FRONTEND=noninteractive
ENV TERM=linux
ARG AIRFLOW_VERSION=1.9.0
ARG AIRFLOW_HOME=/usr/local/airflow
ARG HADOOP_DIR=/usr/local/hadoop
ARG HIVE_DIR=/usr/local/hive
ENV LANGUAGE=en_US.UTF-8
ENV LANG=en_US.UTF-8
ENV LC_ALL=en_US.UTF-8
ENV LC_CTYPE=en_US.UTF-8
ENV LC_MESSAGES=en_US.UTF-8
ENV LC_ALL=en_US.UTF-8
ENV PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/hive/bin:/usr/local/hadoop/bin
ENV HADOOP_HOME=/usr/local/hadoop
ENV JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
ENV HADOOP_OPTS= -Djava.library.path=/usr/local/hadoop/lib/native

|4 
AIRFLOW_HOME=/usr/local/airflow 
AIRFLOW_VERSION=1.9.0 
HADOOP_DIR=/usr/local/hadoop 
HIVE_DIR=/usr/local/hive 
/bin/sh -c set -ex     
&& buildDeps='python-dev libkrb5-dev libsasl2-dev libssl-dev libffi-dev build-essential libblas-dev liblapack-dev libpq-dev libgsasl7-dev git'     
&& apt-get update -yqq     
&& apt-get install -yqq --no-install-recommends $buildDeps python-pip python-requests apt-utils curl netcat locales openjdk-7-jdk
&& sed -i 's/^# en_US.UTF-8 UTF-8$/en_US.UTF-8 UTF-8/g' /etc/locale.gen     
&& locale-gen     
&& update-locale LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8     
&& useradd -ms /bin/bash -d ${AIRFLOW_HOME} airflow     
&& mkdir ${HADOOP_DIR}     
&& chown -R airflow: ${HADOOP_DIR}     
&& mkdir ${HIVE_DIR}     
&& chown -R airflow: ${HIVE_DIR}     
&& python -m pip install -U pip     
&& pip install Cython     
&& pip install pytz     
&& pip install pyOpenSSL     
&& pip install ndg-httpsclient     
&& pip install pyasn1     
&& pip install thrift_sasl==0.3.0     
&& pip install apache-airflow[crypto,celery,gcp_api,postgres,hive,hdfs,jdbc]==$AIRFLOW_VERSION     
&& pip install celery[redis]==3.1.17     
&& pip install six==1.11.0     
&& pip install thrift==0.9.3     
&& apt-get remove --purge -yqq $buildDeps     
&& apt-get clean     
&& rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/* /usr/share/man /usr/share/doc /usr/share/doc-base



COPY file:f0da77bfa6eb9ad036cc27a6e8686af79640ca584f0f58a7e054e149da54e0b5 in /entrypoint.sh 
COPY file:3b792b663b35dc4916b4c51eff2e77b209ca5170dee8209ae7f63b17167d9ad1 in /usr/local/airflow/airflow.cfg 
|4 AIRFLOW_HOME=/usr/local/airflow AIRFLOW_VERSION=1.9.0 HADOOP_DIR=/usr/local/hadoop HIVE_DIR=/usr/local/hive /bin/sh -c chown -R airflow: ${AIRFLOW_HOME}
EXPOSE 5555/tcp 8080/tcp 8793/tcp
USER [airflow]
WORKDIR /usr/local/airflow
ENTRYPOINT ["/entrypoint.sh"]